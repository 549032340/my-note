**微前端思想学习交流座谈会**

本着由浅入深的原则，我们先简单的看一看微前端的核心概念。

### 微前端的核心是什么？拆,

### 拆的目的是什么，为什么要拆？分而治之

- 巨石应用：随着项目的完善、应用功能更新迭代、新功能的增加，应用开始变得庞大臃肿，逐渐变成一个巨石应用，让人痛苦的是，有些功能的开发可能涉及到全局的调整，牵一发而动全身，应用越来越难以维护，维护成本也越来越高。每次开发、上线新需求时还需要花费不少的时间来构建项目，对开发人员的开发效率和体验都造成了不好的影响。
- 因此将一个巨石应用拆分为多个子应用势在必行。一般情况下，我们会基于业务来拆分应用。每个应用都有一个自己的仓库，独立开发、独立部署、独立访问、独立维护，还可以根据团队的特点自主选择适合自己的技术栈，极大的提升了开发人员的效率和体验。

### 为什么要分而治之？

- 巨石应用造成难以维护，需要进行拆分细化
- 历史遗留项目需要进行项目整合，但是技术栈老旧，代码难以兼并

接下来回到微前端的核心概念，拆

### 有哪些方式可以实现微前端的拆？ 

- Nginx路由转发 就是通过链接进行切换不同的应用，切换时会触发浏览器刷新，没有体验之说
- iframe嵌套实现起来过于简单，而且样式显示、兼容性都存在局限性

- Web Components是通过创建自定义元素+服务端渲染实现微前端的，过程略繁琐，通信也很复杂，并且需要使用浏览器的新特性实现，Shadow Dom + custom  element，兼容性不太好，ie压根不支持，Firefox也未完全支持，63之前的版本也不能用，就连旧版的Edge都不支持，直到基于Chromium的新Edge才开始支持这一特性，所以目前 Web Components不是一种实现微前端的好方式。
- 组合式应用路由分发是当前常用的微前端实现方式，single-spa、qiankun、ice都是基于此方式实现的

### 实现微前端的方式有很多种，这只是我找到的其中四种比较常见的，关于微前端的实现方式我就不过多的和大家进行探讨，在明白了什么是微前端的核心思想之后，此时我们再来看一看到底什么是微前端。

- 微前端（Micro-Frontends）是一种类似于微服务的架构，在当年前后端还不分家的时候，首先是后端先暴露出了问题，然后出现的微服务思想，后来才有的微前端。微前端这个词第一次提出于2016年底的某个技术讨论会中，它将微服务的理念应用于浏览器端，即将Web应用由单一的单体应用转变为由多个小型前端应用聚合在一起的应用。各个前端应用还可以独立运行、独立开发、独立部署。**微前端不再是单纯的前端框架或者工具，而是一套架构体系**。
- 微前端是一种多个团队通过独立发布功能的方式来共同构建现代化 web 应用的技术手段及方法策略。



### 通过上面的介绍，我们来提炼一下微前端的核心思想：

- 第一点：拆分项目服务，实现业务逻辑的解耦，然后分而治之

- 第二点：解耦的应用具备完全的自主权利，微应用可以进行独立开发、独立部署、独立运行

- 第三点：目前能见到的微前端的实现方式其实都有一个共同点，那就是路由地址
  - Nginx路由转发方式是通过nginx转发路由实现的
  - iframe嵌套是通过标签直接嵌套了对应的服务地址
  - Web Components

- 代码层面

  - 降低代码之间的耦合性
  - 目前已存在的代码解耦的方式有插件形式：类似于lodash插件，将某些独立的功能封装成纯函数，然后直接从插件里调用，比如常见防抖`_.debounce()`、节流`_.throttle()`、深拷贝`_.cloneDeep()`、延迟 调用`_.delay()`。
  - 然后更黑科技一点的就是将封装好的函数上云，然后直接云调用函数，这种方式在微信小程序中就有，

  通过**Web Components**

- 项目层面

  - 

### 结合上面我对微前端的介绍，大家对微前端这种思想有什么见解？

- 微前端框架只适应于部分场景，开头跟大家提到过，当前微前端比较适用于巨石应用的拆分及历史项目整合这两种情况
- 当前的微前端框架局限性太大，当前的所有微前端都是通过路由来实现的，使用路由来实现微前端的思想是没有问题的，但是当前的微前端框架更多的是像是一种应用加载器，通过一个父页面将所有子应用集成在同一个页面上，然后进行子应用的加载和切换，然后做到了子应用之间的隔离和通信，没有发挥出更大的作用，这也是为什么当前微前端框架只是用部分场景的原因。
- 当前的微前端还不够微，目前来看，微前端思想的最小单位才达到子应用之间的微，按照我当前的理解，我认为微前端还是会按照以路由为媒介的方式继续微下去，
- 微前端思想随处可见：
  - 纯函数、云函数
  - 随着框架的日新月异，代码的耦合程度也越来越低。给我的感觉就是大佬苦口婆心的说：以前给你们制定规范，让你们写代码的时候不要一把梭，不要一把梭，你们就是不听、就是懒，那我直接给你一个框架来约束你们，让你们必须分层写，这个约束性的框架中就包含了微前端思想，vue、react就是这种框架。我认为这也是微前端思想的向代码层面的延申、细化。
  - vue、react实现的spa应用中，使用微前端思想很显著的一点是：通过一个容器进行不同组件之间的切换,让大家觉得是页面在切换，
  - 各种插件、依赖的使用也是，例如npm包，这是目前常见的微前端细化实践，通过安装依赖包使用前端的某些组件，npm包和项目是完全解耦的。但是这属于是半微前端，因为npm包需要下载到项目里使用，这确实是使用了微前端的思想，实现了完全解耦，但是当前依赖包过多导致项目加载越来越慢也是个令人头疼的问题。
  - 
- 

### 总结

  最后再升华一下主题，与其说是微前端或者微服务思想随处可见，不如说是**微**的思想随处可见，不光在编程中，我们的生活、科技也越来越微，具体是哪里微，微了什么，微到了什么程度，这个我相信每个人都有自己可以娓娓道来的地方，这次就不再往这方面过多阐述了。那么今天的学习交流会就到这里结束了，感谢大家的参与！

  

