**微前端思想学习交流座谈会**

我们准备开始了哈，Hello~欢迎各位老师、同学参加今天的微前端思想学习交流座谈会，感谢捧场。

下面开始我们本次交流会的主题：微前端。

为了让大家可以简单的对微前端有个了解，我先从微前端的核心概念给大家讲起，**NEXT**

##### 微前端的核心是什么？拆

此时大家心中多多少少会有些疑惑，为什么是拆，微前端和拆有什么关系？由这个拆字我们可以快速得到三个问题，**NEXT**

拆什么、为什么要拆、怎么拆，**NEXT**

##### 首先是前两个问题，拆的目的是什么，为什么要拆？

第一点，**NEXT**

- **巨石应用**：随着项目的完善、应用功能更新迭代、新功能的增加等操作，应用开始变得庞大臃肿，逐渐变成一个巨石应用，造成的后果就是应用越来越难以维护，维护成本也越来越高,而且让人痛苦的是，有些功能的开发可能涉及到全局的调整，牵一发而动全身。每次开发、上线新需求时还需要花费不少的时间来构建项目，对开发人员的开发效率和体验都造成了不好的影响。

- 因此将一个巨石应用拆分为多个子应用势在必行。一般情况下，我们会基于业务来拆分应用。每个应用都有一个自己的仓库，独立开发、独立部署、独立访问、独立维护，还可以根据团队的特点自主选择适合自己的技术栈，极大的提升了开发人员的效率和体验。

第二点，**NEXT**

- **历史遗留项目**：有些时候我们需要在历史遗留项目上进行开发或者将历史项目与新的项目进行整合，但是历史遗留项目往往技术栈老旧，代码难以兼并。
- 在介绍完历史遗留项目之后，有的同学可能会感到疑惑，这个历史遗留项目跟微前端的拆有什么关系，没发现的同学现在也有同样的困惑了吧。其实就是分析角度的问题，巨石应用的拆是作用在自身，将自身进行拆解，而这里的拆是作用在整体，将历史项目作为拆解的一部分，然后和新的项目进行整合形成一个整体。

##### 下面我们来看一看巨石应用和历史项目的详细介绍，**NEXT**

- 单页面应用是非常流行的项目形态之一

##### 我对微前端的核心为什么拆这个问题进行总结一下就是四个字：分而治之

- 巨石应用造成难以维护，需要进行拆分细化
- 历史遗留项目需要进行项目整合，但是技术栈老旧，需要进行融合兼并

##### 接下来是第三个问题，怎么拆，有哪些方式可以实现微前端的拆呢，**NEXT**

- Nginx路由转发，就是通过链接进行切换不同的应用，切换时会触发浏览器刷新，就类似于a超链跳转，无非就是一个在前端页面进行跳转切换，一个在服务器的nginx进行跳转切换，这种方式没有体验之说，不咋地
- iframe嵌套，实现起来过于简单，而且样式显示、兼容性都存在局限性

- Web Components是通过创建自定义元素+服务端渲染实现微前端的，过程略繁琐，通信也很复杂，并且需要使用浏览器的新特性实现，Shadow Dom + custom  element，兼容性不太好，ie压根不支持，Firefox也未完全支持，63之前的版本也不能用，就连旧版的Edge都不支持，直到基于Chromium的新Edge才开始支持这一特性，所以目前 Web Components在当下不是一种实现微前端的好方式，这种方式可以说是面向未来吧，目前不还不成熟。
- 组合式应用路由分发是当下最常规的微前端实现方式，single-spa、qiankun、ice都是基于此方式实现的

##### 实现微前端的方式有很多种，这算是四种比较常见的形式，还有很多个人封装的框架。关于微前端的实现方式我就不过多的和大家进行交流了，在明白了什么是微前端的核心思想之后，此时，我们再来看一看到底什么是微前端。**NEXT**

- 微前端（Micro-Frontends）是一种类似于微服务的架构，在当年前后端还不分家的时候，首先是后端先暴露出问题，然后出现的微服务思想，后来才有的微前端。微前端这个词第一次提出于2016年底的一个技术讨论会中，它将微服务的理念应用于浏览器端，即将Web应用由单一的单体应用转变为由多个小型前端应用聚合在一起的应用。各个前端应用还可以独立运行、独立开发、独立部署。**微前端不再是单纯的前端框架或者工具，而是一套架构体系**。
- 笼统的来讲，微前端就是一种多个团队通过独立发布功能的方式来共同构建现代化 web 应用的技术手段及方法策略。

##### 通过上面的介绍，大家对微前端的基本概念也有了一定的了解，我们来提炼一下微前端的核心思想，**NEXT**

- 第一点：拆分项目服务，实现业务逻辑的解耦，然后分而治之

- 第二点：解耦的应用具备完全的自主权利，微应用可以进行独立开发、独立部署、独立运行

- 第三点：目前能见到的微前端的实现方式都是以路由作为媒介
  - Nginx路由转发方式是通过nginx转发路由实现的
  - iframe嵌套是通过标签直接嵌套了对应的服务地址，也是玩路由
  
- 我对着三点分别用了一个词进行总结，这也是当前微前端框架中的关键点 


### 下面谈一谈我对微前端的一些见解**NEXT**

- 当前微前端框架对微前端思想的运用还不够成熟，比较低级，举个例子，阿里的开源微前端框架-qiankun，这个框架的作用几乎就是一个应用加载器，就是通过路由将微应用进行加载和切换，然后对微应用进行隔离及统一通信。给我的感觉就是挂的头衔很大，但是实现的东西过于简易。

- 当前的微前端框架局限性太大，只适应于部分场景，开头跟大家提到过，当前微前端比较适用于巨石应用的拆分及历史项目整合这两种情况，除了这两种情况之外，很少有适合目前微前端框架可以使用的场景。
- 然后展开给大家讲讲当前微前端框架的局限性：
  - 当前的所有微前端都是以路由作为媒介来实现的
    - 第一点：使用路由来实现微前端的这种方式是没有问题的，但是当前的微前端框架更多的是通过一个父页面将所有子应用集成在同一个页面上，然后进行子应用的加载和切换，过于简单了。这也是为什么当前微前端框架只适用部分场景的原因之一。
    - 第二点：使用路由作为媒介还需要保证基座和被加载的所有微应用的路由具有唯一性，否则就会出现多个应用路由系统互相抢占、冲突的情况。
  
  ##### 微前端思想随处可见，我举个例子
  
  - 随着框架的日新月异，更新迭代，代码的耦合程度也越来越低。vue框架给我的感觉尤为显著，就像尤雨溪大佬给我在佬苦口婆心的对我说：以前给你制定规范，让你写代码的时候不要一把梭，不要一把梭，你就是不听、就是懒，那我直接给你一个框架来约束你，让你必须分层写代码，这个约束性的框架中就包含了微前端思想，vue、react都这种框架，vue的约束性更强一点。我认为这也是微前端思想的向代码层面的延申、细化。
  
  ##### 大家有没有对微前端思想的运用实例可以列举出来的
  
  - 刚才提到了vue、react框架，它们是怎么实现spa应用的呢？其实也是使用微前端思想很显著的一点：通过一个容器进行不同组件之间的切换,让大家觉得是页面在切换
  - 项目中、代码中的高内聚低耦合思想
  - 函数中的微前端思想
    - 纯函数
    - 函数插件：有代表性的就是lodash插件，将某些独立的功能封装成纯函数，然后直接从插件里调用即可，比如常见防抖`_.debounce()`、节流`_.throttle()`、深拷贝`_.cloneDeep()`、延迟 调用`_.delay()`。
    - 云函数
  - 各种依赖包的使用也包含了微前端思想，例如npm包，这是目前常见的微前端细化实践，通过安装依赖包使用前端的某些组件，npm包和项目是完全解耦的。但是这属于是半微前端，因为npm包需要下载到项目里使用，这确实是使用了微前端的思想，实现了完全解耦，但是当前依赖包过多导致项目加载越来越慢也是个令人头疼的问题，我感觉npm包与微前端思想结合形成动态npm包这个点也是未来的一个探索点。

##### 给大家简单介绍一下QianKun框架

##### 总结

- 与其说是微前端或者微服务思想随处可见，不如说是微的思想随处可见，不光在编程中，我们的生活、科技也越来越微，尤其是在智能家居的不断更新迭代，我们的生活也越来越细致入微。具体是哪里微，微了什么，微到了什么程度，这个我相信每个人都有自己可以娓娓道来的地方，这次就不再往这方面过多阐述了。

- 最后贴一下我在学习微前端时读过的比较好的几篇文章，会后我会把ppt上传到群里，大家感兴趣的话可以自己读一读这几篇关于微前端的文章。今天的微前端思想学习交流会到这里就结束了，谢谢大家的参与！

  

